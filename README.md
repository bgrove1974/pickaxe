Code from the pickaxe book, third edition.

Ch 16.2 'Let's start with the option parser' pp 229
