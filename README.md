Code from the pickaxe book, third edition.

Ch 18.2 Saving Your Session History pp 262
